<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
                        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
                        
<!-- 네임스페이스(사용영역) 설정 -->
<mapper namespace="com.euishoe.Delivery">
	<insert id="insertDelivery" parameterType="Delivery">
      	 INSERT INTO deliveries 
            (delivery_num, 
             delivery_address, 
             delivery_recipient, 
             delivery_recipient_phonenumber, 
             delivery_requirement, 
             order_date, 
             delivery_date, 
             delivery_status) 
		 VALUES     (deliveries_seq.nextval, 
		             #{deliveryAddress}, 
		             #{deliveryRecipient}, 
		             #{deliveryRecipientPhonenumber}, 
		             #{deliveryRequirement}, 
		             #{orderDate}, 
		             #{deliveryDate}, 
		             #{deliveryStatus}) 
   </insert>	
   
   <select id="deliveryInfo" resultType="Delivery" parameterType="Integer">
		select d.delivery_num "deliveryNum",
			   d.delivery_address "deliveryAddress",
			   d.delivery_recipient "deliveryRecipient",
			   d.delivery_recipient_phonenumber "deliveryRecipientPhonenumber",
			   d.delivery_requirement "deliveryRequirement",
			   d.order_date "orderDate",
			   d.delivery_date "deliveryDate",
			   d.delivery_status "deliveryStatus"
		from orders o join deliveries d
		on o.DELIVERY_NUM = d.DELIVERY_NUM
		where o.order_num = #{orderNum}  
	</select>
	
	<select id="selectMaxNextValDelivery" resultType="int">
		select max(delivery_num)
		from deliveries
	</select>
</mapper>
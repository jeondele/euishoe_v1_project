<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
                        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
                        
<!-- 네임스페이스(사용영역) 설정 -->
<mapper namespace="com.euishoe.Review">
	
	<!-- 리뷰 작성  -->
	<insert id="createReview" parameterType="com.euishoe.reviews.dto.Review">		            
		INSERT INTO reviews 
		            (review_num, 
		             customer_id, 
		             product_num, 
		             review_title, 
		             review_content,
		             review_password,
		             review_score, 
		             review_isdeleted) 
		VALUES  (reviews_seq.NEXTVAL, 
		             #{customerId}, 
		             #{productNum}, 
		             #{reviewTitle}, 
		             #{reviewContent}, 
		             #{reviewPassword},
		             #{reviewScore}, 
		             'N');
	</insert>
	
	
	
	
	
	<!-- 모든 리뷰 출력  -->
	<select id="selectAllReview" resultType="Review" >
		SELECT id,
		      		name, 
		       		passwd, 
		       		email, 
		      		TO_CHAR(regidate, 'YYYY-MM-DD') AS "regdate" 
		FROM    users
		ORDER  BY regidate ASC
	</select>
	
	<!-- 자기가 쓴 리뷰 조회 -->
	<select id="selectReviewUserById"  parameterType="String" resultType="Review">
		SELECT id,
					name,
		       		passwd, 
			       	email,
			       	TO_CHAR(regidate, 'YYYY-MM-DD') AS "regdate"
		FROM    users 
		WHERE  id = #{value} 
	</select>
	
	
	
	
</mapper>